{% extends "base.html" %}

{% block title %}{{ resume.title }} - Bibmath RDC{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-10">
        <!-- Breadcrumb -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{{ url_for('main.index') }}">Accueil</a></li>
                <li class="breadcrumb-item"><a href="{{ url_for('main.resumes') }}">Résumés</a></li>
                <li class="breadcrumb-item active" aria-current="page">{{ resume.title }}</li>
            </ol>
        </nav>

        <article class="bg-white shadow-lg rounded-4 overflow-hidden border-0">
            <!-- Header Image / Decoration -->
            <div class="py-5 text-center text-white" style="background: linear-gradient(135deg, #1a1a2e 0%, #e43f5a 100%);">
                <span class="badge bg-white text-danger mb-2 px-3 py-2 rounded-pill fw-bold text-uppercase">{{ resume.subject }}</span>
                <h1 class="display-4 fw-bold px-3">{{ resume.title }}</h1>
                <p class="opacity-75">Niveau : <span class="fw-bold">{{ resume.level | capitalize }}</span> | Par {{ resume.author.username }}</p>
            </div>

            <div class="p-4 p-md-5">
                <!-- Content Section -->
                <div class="resume-full-content mb-5">
                    {{ resume.content_latex | safe }}
                </div>

                <!-- TikZ Simulation / Visual Aid -->
                {% if resume.subject == 'physique' %}
                <div class="my-5 p-4 border rounded-4 bg-light text-center">
                    <h5 class="fw-bold mb-3"><i class="fas fa-project-diagram me-2 text-primary"></i>Représentation schématique</h5>
                    <div class="mx-auto" style="max-width: 500px;">
                        <!-- SVG Placeholder for a physics diagram (Forces) -->
                        <svg viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                            <rect x="150" y="80" width="100" height="60" fill="#e43f5a" stroke="#1a1a2e" stroke-width="2"/>
                            <line x1="200" y1="110" x2="200" y2="40" stroke="#1a1a2e" stroke-width="3" marker-end="url(#arrowhead)"/>
                            <text x="210" y="50" font-family="serif" font-style="italic">Rn</text>
                            <line x1="200" y1="110" x2="200" y2="180" stroke="#1a1a2e" stroke-width="3" marker-end="url(#arrowhead)"/>
                            <text x="210" y="175" font-family="serif" font-style="italic">P = mg</text>
                            <line x1="200" y1="110" x2="280" y2="110" stroke="#1a1a2e" stroke-width="3" marker-end="url(#arrowhead)"/>
                            <text x="285" y="105" font-family="serif" font-style="italic">F</text>
                            <defs>
                                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#1a1a2e" />
                                </marker>
                            </defs>
                        </svg>
                        <p class="text-muted small mt-2">Figure 1 : Bilan des forces s'exerçant sur un système.</p>
                    </div>
                </div>
                {% endif %}

                {% if 'Intégration' in resume.title %}
                <div class="my-5 p-4 border rounded-4 bg-light text-center">
                    <h5 class="fw-bold mb-3"><i class="fas fa-chart-line me-2 text-primary"></i>Visualisation de l'aire sous la courbe</h5>
                    <div class="mx-auto" style="max-width: 500px;">
                        <svg viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                            <path d="M 50 150 Q 150 50 350 150" fill="rgba(228,63,90,0.2)" stroke="#e43f5a" stroke-width="3"/>
                            <line x1="100" y1="110" x2="100" y2="150" stroke="#1a1a2e" stroke-dasharray="4"/>
                            <line x1="250" y1="90" x2="250" y2="150" stroke="#1a1a2e" stroke-dasharray="4"/>
                            <line x1="20" y1="150" x2="380" y2="150" stroke="#333" stroke-width="2"/>
                            <text x="95" y="165" font-family="serif">a</text>
                            <text x="245" y="165" font-family="serif">b</text>
                            <text x="360" y="140" font-family="serif">x</text>
                            <text x="200" y="120" font-family="serif" font-weight="bold">Aire = ∫ f(x) dx</text>
                        </svg>
                        <p class="text-muted small mt-2">Figure 2 : Représentation géométrique de l'intégrale.</p>
                    </div>
                </div>
                {% endif %}

                <hr class="my-5">

                <div class="row align-items-center bg-light p-4 rounded-4">
                    <div class="col-md-8">
                        <h5 class="fw-bold">Ce cours vous a plu ?</h5>
                        <p class="mb-0 text-muted">Partagez-le avec vos camarades ou téléchargez la version PDF.</p>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <button class="btn btn-outline-dark me-2"><i class="fas fa-share-alt"></i></button>
                        <button class="btn btn-danger"><i class="fas fa-file-pdf me-2"></i>PDF</button>
                    </div>
                </div>
            </div>
        </article>

        <section class="mt-5">
            <h3 class="fw-bold mb-4">Exercices liés</h3>
            <div class="row g-4">
                <p class="text-muted px-3">Connectez-vous pour voir les exercices recommandés pour ce chapitre.</p>
            </div>
        </section>
    </div>
</div>

<style>
    .resume-full-content {
        font-size: 1.15rem;
        line-height: 1.8;
        color: #2d3436;
    }
    .resume-full-content h2, .resume-full-content h3 {
        color: #1a1a2e;
        margin-top: 2rem;
        font-weight: 700;
        border-left: 5px solid #e43f5a;
        padding-left: 15px;
    }
    .resume-full-content p {
        margin-bottom: 1.5rem;
    }
</style>
{% endblock %}
